# Popup UI 更新规格

## ADDED Requirements

### Requirement: popup页面底部图标栏必须添加自动填充按钮组件
popup页面底部图标栏SHALL新增自动填充按钮组件，使用户能够快速访问表单自动填充功能。

#### 场景：新增自动填充按钮到图标栏
**Scenario**: 用户打开popup扩展查看功能时
- 在屏蔽广告按钮和设置按钮之间插入自动填充按钮
- 按钮使用表单填充相关的图标（例如：带有箭头的文档图标）
- 按钮图标为SVG格式，24×24像素，填充颜色 #666666
- 按钮大小32×32像素，圆角7.5px，边框1px实线 #e5e5e5
- 背景色透明，悬停时背景色变为 rgba(0,0,0,0.03)
- 悬停时显示tooltip："自动填充表单"

### Requirement: 自动填充按钮必须支持多种状态显示
自动填充按钮SHALL支持多种状态显示，以直观地反映当前自动填充操作的执行状态和结果。

#### 场景：按钮状态管理
**Scenario**: 自动填充功能执行过程中
- **默认状态**: 灰色图标，表示可点击
- **加载状态**: 旋转动画图标，表示填充进行中
- **成功状态**: 绿色图标或成功动画，表示填充完成
- **错误状态**: 红色图标或错误动画，表示填充失败
- 状态持续时间：成功状态显示2秒，错误状态显示3秒
- 状态切换后自动恢复到默认状态

### Requirement: 图标栏必须适配4个按钮布局
图标栏SHALL调整布局和样式设计，以容纳新增的自动填充按钮并确保4个按钮在有限空间内合理分布和显示。

#### 场景：图标栏布局适配
**Scenario**: 新增自动填充按钮后
- 图标栏容器总宽度保持100%
- 按钮间隔调整为8px，保证4个按钮均匀分布
- 在手机等小尺寸屏幕下自动缩小按钮间距
- 按钮容器最小宽度280px，避免过度挤压
- 当浏览器限制popup最小宽度时，使用水平滚动或换行布局

### Requirement: 自动填充按钮必须提供完整的交互反馈
自动填充按钮SHALL提供完整的交互反馈机制，包括点击效果、状态变化和视觉反馈，以提升用户操作体验。

#### 场景：按钮交互反馈
**Scenario**: 用户点击自动填充按钮时
- 点击时按钮背景色加深为 rgba(0,0,0,0.08)
- 点击后按钮有0.1s的按下动画效果
- 点击时禁用按钮，防止重复点击
- 操作完成后恢复按钮可用状态
- 提供视觉和触觉反馈（如果浏览器支持）

## MODIFIED Requirements

### Requirement: 图标栏SHALL更新样式以支持4个按钮
图标栏样式SHALL进行更新以支持4个按钮布局，确保所有按钮在有限空间内合理展示。

#### 场景：图标栏样式更新
**Scenario**: 新增自动填充按钮后
- 图标栏容器padding从8px 12px调整为12px，增加水平空间
- 修改现有按钮顺序：获取OpenKey → 屏蔽广告 → 自动填充 → 设置
- 统—所有图标按钮的active状态样式
- 优化图标对齐方式，确保垂直居中
- 如果空间不足，考虑缩小图标尺寸到20×20像素

### Requirement: 现有按钮的状态显示需要与新的状态系统同步
现有按钮的状态显示机制SHALL与新的自动填充按钮状态系统保持同步，确保所有功能按钮的状态管理一致且互不冲突。

#### 场景：现有按钮的状态同步
**Scenario**: 同时使用多个功能时
- 确保获取OpenKey、屏蔽广告和设置按钮的状态管理不受影响
- 不同功能同时执行时，各自按钮状态独立显示
- 考虑在不同按钮显示不同状态时，避免视觉冲突
- 保持按钮状态的一致性和可预测性

## REMOVED Requirements

无移除需求。本规格确保了在最小化UI变更的前提下，无缝集成自动填充按钮到现有popup界面中，同时保持了与现有设计语言和交互模式的一致性。
